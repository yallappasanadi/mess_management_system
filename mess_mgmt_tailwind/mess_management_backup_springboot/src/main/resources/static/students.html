<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Students - Mess Management</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-slate-50 min-h-screen font-sans">
  <div class="max-w-6xl mx-auto p-6">
    <header class="flex justify-between items-center">
      <h1 class="text-2xl font-semibold">Students</h1>
      <div><button onclick="window.close()" class="px-3 py-2 border rounded">Close</button></div>
    </header>

    <div class="mt-6 bg-white p-4 rounded shadow">
      <div class="flex justify-between items-center">
        <div>
          <label class="text-sm text-slate-500">Filter</label>
          <select id="filterSelect" class="ml-2 border rounded p-1">
            <option value="all">All</option>
            <option value="present">Present</option>
            <option value="absent">Absent</option>
          </select>
        </div>
        <div>
          <input id="searchBox" placeholder="Search by name or roll" class="border rounded p-1" />
        </div>
      </div>

      <table class="w-full mt-4 table-auto">
        <thead class="text-left text-sm text-slate-500">
          <tr><th class="p-2">Roll No</th><th>Name</th><th>Course</th><th>Entry</th><th>Exit</th></tr>
        </thead>
        <tbody id="studentsTbody" class="text-sm text-slate-700">
          <!-- Rendered by JS -->
        </tbody>
      </table>
    </div>
  </div>

  <script src="app.js"></script>
  <script>
    // read query param for filter
    const params = new URLSearchParams(location.search);
    const initialFilter = params.get('filter') || 'all';
    document.getElementById('filterSelect').value = initialFilter;
    document.getElementById('filterSelect').addEventListener('change', renderStudents);
    document.getElementById('searchBox').addEventListener('input', renderStudents);
    renderStudents();
  </script>
</body>
</html>
